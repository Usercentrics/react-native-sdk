name: CI/CD

env:
  NODE_JS_VERSION: 14.21.3

on:
  pull_request:
    branches:
      - master
  workflow_dispatch:

jobs:
  test-rn:
    runs-on: ubuntu-24.04
    steps:
      - uses: actions/checkout@v1

      - name: Use Node.js "$NODE_JS_VERSION"
        uses: actions/setup-node@v2
        with:
          node-version: ${{ env.NODE_JS_VERSION }}

      - name: Run RN Tests
        run: |
          npm ci
          npm test

      - name: Assert that every file that should be public has been exported
        run: ./scripts/assert_export.sh

  test-ios:
    needs: test-rn
    runs-on: macos-13

    steps:
      - name: No-op
        run: echo "Skipping iOS tests. Job completed successfully."


  test-android:
    needs: test-rn
    runs-on: macos-13

    steps:
      - name: No-op
        run: echo "Skipping Android tests. Job completed successfully."
